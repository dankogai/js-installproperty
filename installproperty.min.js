(function(root){"use strict";if(typeof Object.installProperty==="function")return;var create=Object.create;if(!create||"hasOwnProperty"in create(null)){throw new Error("ES5 unsupported")}var nameOfSafe="__previousProperties__";var hasOwnProperty="".hasOwnProperty;var has=function(o,k){return hasOwnProperty.call(o,k)};var defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getOwnPropertyNames=Object.getOwnPropertyNames,isArray=Array.isArray;var isPrimitive=function(o){return Object(o)!==o};function installProperty(target,prop,desc){if(prop===nameOfSafe)return;if(isPrimitive(target)){throw new TypeError(target+" is not an object")}if(!has(target,nameOfSafe)){try{defineProperty(target,nameOfSafe,{value:create(null),writable:true,configurable:true})}catch(e){throw e}}var safe=target[nameOfSafe],prev;if(isArray(target)){if(prop.match(/^[0-9]+$/)){if(target.length<=prop*1){prev=getOwnPropertyDescriptor(target,"length");if(!safe["length"])safe["length"]=[];safe["length"].push(prev);target.length=prop}}}prev=getOwnPropertyDescriptor(target,prop);if(prev){if(!prev.configurable)return false;if(!prev.writable)return true}desc.configurable=true;desc.writable=true;if(!safe[prop])safe[prop]=[];safe[prop].push(prev);defineProperty(target,prop,desc);return true}function defaultProperty(target,prop,desc){return has(target,prop)?false:installProperty(target,prop,desc)}function revertProperty(target,prop){if(prop===nameOfSafe)return;var safe=target[nameOfSafe];if(!safe)return;if(!safe[prop])return;if(!safe[prop].length){delete safe[prop];return}var prev=safe[prop].pop();if(!prev){delete target[prop]}else{var curr=getOwnPropertyDescriptor(target,prop);defineProperty(target,prop,prev);return curr}}function installProperties(target,descs){getOwnPropertyNames(descs).filter(function(k){return k!==nameOfSafe}).forEach(function(name){installProperty(target,name,descs[name])});return target}function defaultProperties(target,descs){getOwnPropertyNames(descs).filter(function(k){return k!==nameOfSafe}).forEach(function(name){defaultProperty(target,name,descs[name])});return target}function revertProperties(target,descs){descs=descs||target[nameOfSafe];var prevs=create(null);getOwnPropertyNames(descs).filter(function(k){return k!==nameOfSafe}).forEach(function(name){var prev=revertProperty(target,name,descs[name]);if(prev)defineProperty(prevs,name,prev)});return prevs}function restoreProperties(target){getOwnPropertyNames(target[nameOfSafe]).filter(function(k){return k!==nameOfSafe}).forEach(function(name){var safe=target[nameOfSafe][name],desc;if(safe&&safe.length){desc=safe[0];if(desc){if(isArray(target)&&name==="length"){target.length=safe[0].value}else{defineProperty(target,name,safe[0])}return}}delete target[name]});delete target[nameOfSafe]}var v2s=function(v){return{value:v,configurable:true,writable:true}};defaultProperties(Object,{installProperty:v2s(installProperty),defaultProperty:v2s(defaultProperty),revertProperty:v2s(revertProperty),installProperties:v2s(installProperties),defaultProperties:v2s(defaultProperties),revertProperties:v2s(revertProperties),restoreProperties:v2s(restoreProperties)})})(this);